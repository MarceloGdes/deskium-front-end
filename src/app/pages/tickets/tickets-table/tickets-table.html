<div class="table-responsive">
  <table class="table align-middle">
    <thead>
    <tr>
      <th scope="col" class="fw-medium">Ticket</th>
      <th scope="col" class="fw-medium">Título</th>
      @if(statusId === 'ABERTO'){
        <th scope="col" class="fw-medium">Sub-Status</th>
      }
      <th scope="col" class="fw-medium">Motivo</th>
      <th scope="col" class="fw-medium">Categoria</th>
      @if(tipoUsuario == 'SUPORTE'|| 'GESTOR_SUPORTE'){
        <th scope="col" class="fw-medium">Prioridade</th>
      }

      @if (tipoUsuario == 'SOLICITANTE'){
        <th scope="col" class="fw-medium">Responsável</th>
      } @else {
        <th scope="col" class="fw-medium">Solicitante</th>
      }

      <th scope="col" class="fw-medium">Data de Abertura</th>

      @if(statusId !== 'ABERTO'){
        <th scope="col" class="fw-medium">Data de Fechamento</th>
      }
    </tr>
    </thead>
    <tbody>
      @for (ticket of tickets; track ticket.id) {
        <tr class="border-bottom">
          <td >
            <a
              class="link-primary"
              routerLink="../{{ticket.id}}"
              routerLinkActive>
              #{{ ticket.id }}
            </a>
          </td>
          <td >{{ ticket.titulo }}</td>
          @if(statusId === 'ABERTO'){
            <td class="td-substatus">
                  <span
                    class="badge"
                    [ngClass]="{
                      'bg-warning text-dark': ticket.subStatus.id === 'AGUARDANDO_RETORNO',
                      'bg-success text-white': ticket.subStatus.id === 'EM_ATENDIMENTO',
                      'bg-primary text-white': ticket.subStatus.id === 'NOVO'
                    }">
                    {{ ticket.subStatus.descricao }}
                  </span>
            </td>
          }

          <td >{{ ticket.motivo.descricao }}</td>
          <td >{{ ticket.categoria?.descricao }}</td>
          @if(tipoUsuario == 'SUPORTE'|| 'GESTOR_SUPORTE'){
            <td >{{ ticket.prioridade }}</td>
          }
          @if (tipoUsuario == 'SOLICITANTE'){
            <td>{{ ticket.suporte.nomeCompleto }}</td>
          } @else {
            <td>{{ ticket.solicitante.nomeCompleto }}</td>
          }
          <!--Date pipe para formatar a data -->
          <td >{{ ticket.criadoEm | date:'dd/MM/yyyy HH:mm' }}</td>

          @if(statusId !== 'ABERTO'){
            <td >{{ ticket.dataResolucao | date:'dd/MM/yyyy HH:mm' }}</td>
          }
        </tr>
      }
    </tbody>
  </table>
</div>
